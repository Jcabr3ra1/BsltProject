<!-- Contenedor principal del sidebar -->
<nav class="sidebar-container">
  <!-- Contenido del sidebar -->
  <div class="sidebar-content">
    <!-- Dashboard - Siempre visible -->
    <a mat-button [routerLink]="['dashboard']" class="sidebar-link" [class.active]="activePage === 'dashboard'" (click)="navigateTo('dashboard')">
      <mat-icon>dashboard</mat-icon>
      <span class="link-text">Dashboard</span>
    </a>
    
    <!-- Divider -->
    <div class="sidebar-divider"></div>

    <!-- SEGURIDAD: Solo ADMIN -->
    <div *ngIf="isAdmin()" class="sidebar-section">
      <div class="section-header" [class.expanded]="expandedMenus['seguridad']" (click)="toggleMenu('seguridad')">
        <div class="header-content">
          <mat-icon>admin_panel_settings</mat-icon>
          <span class="section-title">Seguridad</span>
        </div>
        <mat-icon class="expand-icon">{{ expandedMenus['seguridad'] ? 'expand_more' : 'expand_less' }}</mat-icon>
      </div>
      <div class="section-content" [class.expanded]="expandedMenus['seguridad']">
        <a mat-button [routerLink]="['usuarios']" class="sidebar-link" [class.active]="activePage === 'usuarios'" (click)="navigateTo('usuarios')">
          <mat-icon>group</mat-icon>
          <span class="link-text">Usuarios</span>
        </a>
        <a mat-button [routerLink]="['roles']" class="sidebar-link" [class.active]="activePage === 'roles'" (click)="navigateTo('roles')">
          <mat-icon>shield</mat-icon>
          <span class="link-text">Roles</span>
        </a>
        <a mat-button [routerLink]="['estados']" class="sidebar-link" [class.active]="activePage === 'estados'" (click)="navigateTo('estados')">
          <mat-icon>track_changes</mat-icon>
          <span class="link-text">Estados</span>
        </a>
        <a mat-button [routerLink]="['permisos']" class="sidebar-link" [class.active]="activePage === 'permisos'" (click)="navigateTo('permisos')">
          <mat-icon>key</mat-icon>
          <span class="link-text">Permisos</span>
        </a>
      </div>
    </div>

    <!-- FINANZAS: visible para todos, pero con opciones limitadas para USER -->
    <div *ngIf="isAdmin() || isModerador() || isUsuario()" class="sidebar-section">
      <div class="section-header" [class.expanded]="expandedMenus['finanzas']" (click)="toggleMenu('finanzas')">
        <div class="header-content">
          <mat-icon>savings</mat-icon>
          <span class="section-title">Finanzas</span>
        </div>
        <mat-icon class="expand-icon">{{ expandedMenus['finanzas'] ? 'expand_more' : 'expand_less' }}</mat-icon>
      </div>
      <div class="section-content" [class.expanded]="expandedMenus['finanzas']">
        <a mat-button [routerLink]="['cuentas']" class="sidebar-link" [class.active]="activePage === 'cuentas'" (click)="navigateTo('cuentas')">
          <mat-icon>account_balance</mat-icon>
          <span class="link-text">Cuentas</span>
        </a>
        <a mat-button [routerLink]="['transacciones']" class="sidebar-link" [class.active]="activePage === 'transacciones'" (click)="navigateTo('transacciones')">
          <mat-icon>sync_alt</mat-icon>
          <span class="link-text">Transacciones</span>
        </a>
        <a mat-button [routerLink]="['bolsillos']" class="sidebar-link" [class.active]="activePage === 'bolsillos'" (click)="navigateTo('bolsillos')">
          <mat-icon>account_balance_wallet</mat-icon>
          <span class="link-text">Bolsillos</span>
        </a>

        <!-- Estos 2 solo para ADMIN o MODERADOR -->
        <a *ngIf="!isUsuario()" mat-button [routerLink]="['tipo-transaccion']" class="sidebar-link" [class.active]="activePage === 'tipo-transaccion'" (click)="navigateTo('tipo-transaccion')">
          <mat-icon>description</mat-icon>
          <span class="link-text">Tipos de Transacción</span>
        </a>
        <a *ngIf="!isUsuario()" mat-button [routerLink]="['tipo-movimiento']" class="sidebar-link" [class.active]="activePage === 'tipo-movimiento'" (click)="navigateTo('tipo-movimiento')">
          <mat-icon>shuffle</mat-icon>
          <span class="link-text">Tipos de Movimiento</span>
        </a>
      </div>
    </div>

    <!-- Configuración y Ayuda -->
    <a mat-button [routerLink]="['configuracion']" class="sidebar-link" [class.active]="activePage === 'configuracion'" (click)="navigateTo('configuracion')">
      <mat-icon>settings</mat-icon>
      <span class="link-text">Configuración</span>
    </a>

    <a mat-button [routerLink]="['ayuda']" class="sidebar-link" [class.active]="activePage === 'ayuda'" (click)="navigateTo('ayuda')">
      <mat-icon>help</mat-icon>
      <span class="link-text">Ayuda</span>
    </a>
  </div>
</nav>
